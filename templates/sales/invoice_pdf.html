<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <style>
    @page { size: A4; margin: 15mm }
    body{font-family: DejaVu Sans, Helvetica, Arial, sans-serif; font-size:11px; margin:0; padding:0; color:#222}
    .page{padding:6px}
    .header{display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; position:fixed; top:6mm; left:15mm; right:15mm}
    .shop{font-weight:700; font-size:14px}
    .meta{font-size:10px}
    .header-left{display:flex; align-items:center}
    .logo-circle{width:40px; height:40px; border-radius:50%; background:#2b6cb0; color:#fff; display:flex; align-items:center; justify-content:center; font-weight:700; margin-right:8px}
    .content{margin-top:56px; margin-bottom:26px}
    table{width:100%; border-collapse:collapse; margin-top:6px; font-size:11px}
    th,td{padding:6px 6px; border:1px solid #bbb}
    th{background:#f7f7f7; text-align:left}
    .right{text-align:right}
    .summary{margin-top:8px; float:right; width:38%}
    .small{font-size:10px}
    .footer{position:fixed; bottom:6mm; left:15mm; right:15mm; text-align:center; font-size:10px; color:#666}
  </style>
</head>
<body>
  <div class="page">
    <div class="header">
      <div class="header-left">
        <div class="logo-circle">{{ shop.name|slice:":1"|upper }}</div>
        <div>
          <div class="shop">{{ shop.name }}</div>
          {% if shop.address %}<div class="meta small">{{ shop.address }}</div>{% endif %}
          {% if shop.phone %}<div class="meta small">{{ shop.phone }}</div>{% endif %}
        </div>
      </div>
      <div class="meta small">
        <div>Facture #: <strong>{{ invoice.number }}</strong></div>
        <div>Date: {{ sale.created_at }}</div>
      </div>
    </div>

    <div class="content">
      <table>
        <thead>
          <tr>
            <th style="width:48%">Produit</th>
            <th style="width:14%">Réf</th>
            <th style="width:10%" class="right">Qté</th>
            <th style="width:14%" class="right">Prix</th>
            <th style="width:14%" class="right">Total</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>{{ item.product_name }}</td>
            <td>{{ item.product_code }}</td>
            <td class="right">{{ item.quantity }}</td>
            <td class="right">{{ item.price }}</td>
            <td class="right">{{ item.subtotal }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <div class="summary">
        <table>
          <tr>
            <td class="small">Sous-total</td>
            <td class="right small">{{ sale.subtotal }}</td>
          </tr>
          <tr>
            <td class="small">Taxes</td>
            <td class="right small">{{ sale.tax_amount }}</td>
          </tr>
          <tr>
            <td><strong>Total</strong></td>
            <td class="right"><strong>{{ sale.total_amount }}</strong></td>
          </tr>
        </table>
      </div>
    </div>

    <div class="footer">Page <pdf:pagenumber/> / <pdf:pagecount/></div>
  </div>
</body>
</html>